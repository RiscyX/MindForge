/* MindForge Bootstrap theme tokens
 * colors=eae9fc-010104-575ddb-5b5b6b-ffffff
 * text, bg, primary, secondary, accent
 * font=Solway
 */

:root {
    --mf-text: #eae9fc;
    --mf-bg: #010104;
    --mf-primary: #575ddb;
    --mf-secondary: #5b5b6b;
    --mf-accent: #ffffff;

    --mf-primary-rgb: 87, 93, 219;
    --mf-secondary-rgb: 91, 91, 107;
    --mf-text-rgb: 234, 233, 252;
    --mf-bg-rgb: 1, 1, 4;

    --mf-font: 'Solway', system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;

    /* Bootstrap variable overrides */
    --bs-body-font-family: var(--mf-font);
    --bs-body-color: var(--mf-text);
    --bs-body-color-rgb: var(--mf-text-rgb);
    --bs-body-bg: var(--mf-bg);
    --bs-body-bg-rgb: var(--mf-bg-rgb);

    --bs-primary: var(--mf-primary);
    --bs-primary-rgb: var(--mf-primary-rgb);

    --bs-secondary: var(--mf-secondary);
    --bs-secondary-rgb: var(--mf-secondary-rgb);

    --bs-link-color: var(--mf-primary);
    --bs-link-hover-color: rgba(var(--mf-primary-rgb), 0.85);

    --bs-border-color: rgba(234, 233, 252, 0.14);
    --bs-border-color-translucent: rgba(234, 233, 252, 0.12);
}

html {
    background: var(--mf-bg);
    color-scheme: dark;
}

body {
    min-height: 100vh;
}

/* Auth/register page styling (moved from auth.css into index.css) */
.mf-auth {
    background:
        radial-gradient(900px circle at 15% 35%, rgba(var(--mf-primary-rgb), 0.16), transparent 55%),
        radial-gradient(900px circle at 85% 65%, rgba(var(--mf-secondary-rgb), 0.14), transparent 60%),
        var(--mf-bg);
    color: var(--mf-text);
    font-family: var(--mf-font);
    min-height: 100vh;
}

.mf-auth-page {
    overflow: hidden;
}

/* Keep nested scroll only on auth pages. */
.mf-auth-page > main {
    min-height: 0;
    overflow-y: auto;
}

.mf-auth a {
    text-decoration: none;
}

.mf-auth .mf-brand {
    font-weight: 700;
    letter-spacing: 0.2px;
}

.mf-auth .mf-left .mf-tagline {
    font-weight: 700;
    line-height: 1.05;
}

.mf-auth .mf-left .mf-subtitle {
    color: rgba(var(--mf-text-rgb), 0.60);
    max-width: 36rem;
}

.mf-auth .mf-card {
    width: 100%;
    max-width: 520px;
    background: rgba(var(--mf-text-rgb), 0.03);
    border: 1px solid rgba(var(--mf-text-rgb), 0.10);
    border-radius: 1rem;
    backdrop-filter: blur(10px);
}

.mf-auth .form-label {
    font-size: 0.9rem;
    color: rgba(var(--mf-text-rgb), 0.78);
}

.mf-auth .form-control {
    background: rgba(var(--mf-text-rgb), 0.04);
    border-color: rgba(var(--mf-text-rgb), 0.12);
    color: rgba(var(--mf-text-rgb), 0.92);
    padding: 0.75rem 0.9rem;
    border-radius: 0.65rem;
}

.mf-auth .form-control::placeholder {
    color: rgba(var(--mf-text-rgb), 0.35);
}

.mf-auth .form-control:focus {
    border-color: rgba(var(--mf-primary-rgb), 0.75);
    box-shadow: 0 0 0 0.25rem rgba(var(--mf-primary-rgb), 0.14);
}

.mf-auth .btn-primary {
    border-radius: 0.65rem;
    padding: 0.85rem 1rem;
    background-color: var(--mf-primary);
    border-color: rgba(var(--mf-primary-rgb), 0.90);
}

.mf-auth .btn-primary:hover {
    background-color: rgba(var(--mf-primary-rgb), 0.90);
    border-color: rgba(var(--mf-primary-rgb), 1);
}

.mf-auth .mf-muted {
    color: rgba(var(--mf-text-rgb), 0.60);
}

.mf-auth .mf-strength {
    height: 6px;
    background: rgba(var(--mf-text-rgb), 0.10);
    border-radius: 999px;
    overflow: hidden;
}

.mf-auth .mf-strength > div {
    height: 100%;
    width: 0%;
    border-radius: 999px;
    transition: width 140ms ease, background-color 140ms ease;
}

/* Flash messages (fixed, non-layout-shifting) */
.mf-flash-stack {
    position: fixed;
    left: 1rem;
    bottom: 1rem;
    z-index: 1060;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    max-width: min(420px, calc(100vw - 2rem));
    pointer-events: none;
}

.mf-flash {
    pointer-events: auto;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.72rem 0.86rem;
    border-radius: 0.82rem;
    border: 1px solid rgba(var(--mf-text-rgb), 0.14);
    background: linear-gradient(135deg, rgba(var(--mf-surface-rgb), 0.98), rgba(var(--mf-surface-rgb), 0.88));
    backdrop-filter: blur(8px);
    color: rgba(var(--mf-text-rgb), 0.93);
    font-weight: 600;
    line-height: 1.25;
    cursor: pointer;
    box-shadow: 0 14px 38px rgba(0, 0, 0, 0.24);
    animation: mfFlashIn 220ms ease-out;
}

.mf-flash::before {
    content: "";
    width: 1.45rem;
    height: 1.45rem;
    border-radius: 999px;
    flex: 0 0 1.45rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 0.85rem;
    font-weight: 700;
}

.mf-flash--error {
    border-color: rgba(224, 77, 87, 0.52);
    background: linear-gradient(135deg, rgba(76, 20, 26, 0.92), rgba(52, 17, 23, 0.9));
}

.mf-flash--error::before {
    content: "!";
    color: #ffd6da;
    background: rgba(224, 77, 87, 0.24);
}

.mf-flash--success {
    border-color: rgba(47, 180, 122, 0.55);
    background: linear-gradient(135deg, rgba(16, 72, 55, 0.92), rgba(17, 60, 48, 0.9));
}

.mf-flash--success::before {
    content: "\2713";
    color: #d7ffe9;
    background: rgba(47, 180, 122, 0.28);
}

.mf-flash--warning {
    border-color: rgba(247, 186, 78, 0.58);
    background: linear-gradient(135deg, rgba(88, 62, 14, 0.92), rgba(72, 54, 16, 0.9));
}

.mf-flash--warning::before {
    content: "!";
    color: #fff0c5;
    background: rgba(247, 186, 78, 0.26);
}

.mf-flash--info {
    border-color: rgba(98, 148, 236, 0.52);
    background: linear-gradient(135deg, rgba(22, 45, 84, 0.92), rgba(22, 41, 74, 0.9));
}

.mf-flash--info::before {
    content: "i";
    color: #dce8ff;
    background: rgba(98, 148, 236, 0.28);
}

.mf-flash__message {
    flex: 1;
    white-space: normal;
    overflow-wrap: anywhere;
}

@keyframes mfFlashIn {
    from {
        opacity: 0;
        transform: translateY(8px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@media (max-width: 991.98px) {
    .mf-flash-stack {
        left: 1rem;
        right: 1rem;
        max-width: none;
    }
}

/* ──────────────────────────────────────────────
   Error pages (404 / 500)
   ────────────────────────────────────────────── */
.mf-error-page {
    max-width: 480px;
    padding: 2rem 1rem;
    position: relative;
}

.mf-error-glow {
    position: absolute;
    top: -60px;
    left: 50%;
    translate: -50% 0;
    width: 320px;
    height: 320px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(var(--mf-primary-rgb), 0.18) 0%, transparent 70%);
    pointer-events: none;
    z-index: 0;
}

.mf-error-glow--danger {
    background: radial-gradient(circle, rgba(224, 77, 87, 0.16) 0%, transparent 70%);
}

.mf-error-code {
    position: relative;
    z-index: 1;
    font-size: clamp(6rem, 18vw, 10rem);
    font-weight: 700;
    line-height: 1;
    letter-spacing: -0.04em;
    background: linear-gradient(135deg, rgba(var(--mf-primary-rgb), 1), rgba(var(--mf-text-rgb), 0.45));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 0.15em;
}

.mf-error-heading {
    position: relative;
    z-index: 1;
    font-weight: 600;
    color: rgba(var(--mf-text-rgb), 0.92);
}

.mf-error-text {
    position: relative;
    z-index: 1;
    color: rgba(var(--mf-text-rgb), 0.55);
    font-size: 1.05rem;
    line-height: 1.6;
}

/* ──────────────────────────────────────────────
   Server-side form validation errors (CakePHP)
   ────────────────────────────────────────────── */
.form-group.error .form-control,
.form-group.error .form-select,
.input.error input,
.input.error select,
.input.error textarea {
    border-color: #e04d57 !important;
    box-shadow: 0 0 0 0.2rem rgba(224, 77, 87, 0.18) !important;
}

.form-group .error-message,
.input .error-message {
    display: block;
    color: #f87171;
    font-size: 0.82rem;
    margin-top: 0.3rem;
    font-weight: 500;
}

/* Admin dashboard */
.mf-admin-wrapper {
    overflow-x: hidden;
}

.mf-admin-shell {
    display: flex;
    flex: 1 1 auto;
    min-height: 0;
}

.mf-admin-layout {
    flex: 1 1 auto;
    min-height: 0;
}

.mf-admin-sidebar {
    width: 260px;
    border-right: 1px solid rgba(var(--mf-text-rgb), 0.10);
    background: rgba(var(--mf-text-rgb), 0.02);
    backdrop-filter: blur(10px);
    overflow-y: auto;
}

.mf-admin-sidebar__header {
    padding: 1rem 1.25rem;
    border-bottom: 1px solid rgba(var(--mf-text-rgb), 0.08);
}

.mf-admin-sidebar__section {
    padding: 1rem 1.25rem;
}

.mf-admin-sidebar__label {
    font-size: 0.72rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: rgba(var(--mf-text-rgb), 0.55);
    margin-bottom: 0.75rem;
}

.mf-admin-nav {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.mf-admin-nav__link {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    padding: 0.6rem 0.75rem;
    border-radius: 0.6rem;
    color: rgba(var(--mf-text-rgb), 0.85);
    text-decoration: none;
    transition: background 0.15s ease, color 0.15s ease;
}

.mf-admin-nav__link > i {
    font-size: 1.05rem;
    width: 1.25rem;
    text-align: center;
    flex-shrink: 0;
    opacity: 0.7;
    transition: opacity 0.15s ease;
}

.mf-admin-nav__link:hover > i,
.mf-admin-nav__link.active > i {
    opacity: 1;
}

.mf-admin-nav__link:focus-visible {
    outline: none;
    box-shadow: 0 0 0 0.25rem rgba(var(--mf-primary-rgb), 0.16);
    background: rgba(var(--mf-primary-rgb), 0.10);
    color: var(--mf-text);
}

.mf-admin-nav__link:hover {
    background: rgba(var(--mf-text-rgb), 0.05);
    color: var(--mf-text);
}

.mf-admin-nav__link.active {
    color: var(--mf-primary);
    background: rgba(var(--mf-primary-rgb), 0.12);
}

.mf-admin-sidebar__footer {
    padding: 1rem 1.25rem;
    border-top: 1px solid rgba(var(--mf-text-rgb), 0.08);
}

.mf-admin-main {
    min-width: 0;
    overflow-y: auto;
    overflow-x: hidden;
}

/* On small screens prefer page scroll over nested scroll containers. */
@media (max-width: 991.98px) {
    .mf-admin-main {
        overflow: visible;
    }

    .mf-admin-shell,
    .mf-admin-layout {
        min-height: auto;
    }

    body.mf-admin-body {
        overflow-x: hidden;
        overflow-y: auto;
    }
}

.mf-admin-topbar {
    position: sticky;
    top: 0;
    z-index: 1020;
    background: rgba(var(--mf-bg-rgb), 0.78);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid rgba(var(--mf-text-rgb), 0.10);
}

.mf-admin-topbar__menu {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
}

.mf-admin-topbar__title {
    color: rgba(var(--mf-text-rgb), 0.70);
    font-size: 0.92rem;
    font-weight: 650;
    max-width: 52vw;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.mf-admin-offcanvas {
    width: min(320px, 88vw);
    background: rgba(var(--mf-bg-rgb), 0.92);
    color: rgba(var(--mf-text-rgb), 0.92);
    border-right: 1px solid rgba(var(--mf-text-rgb), 0.12);
    backdrop-filter: blur(12px);
}

.mf-admin-offcanvas .offcanvas-header {
    border-bottom: 1px solid rgba(var(--mf-text-rgb), 0.10);
}

.mf-admin-offcanvas .offcanvas-title {
    font-weight: 900;
    letter-spacing: -0.01em;
}

.mf-admin-offcanvas .offcanvas-body {
    overscroll-behavior: contain;
    -webkit-overflow-scrolling: touch;
}

.mf-admin-offcanvas .btn-close {
    filter: invert(1) grayscale(1);
    opacity: 0.8;
}

@media (max-width: 991.98px) {
    .mf-admin-table-scroll {
        max-height: none;
        -webkit-overflow-scrolling: touch;
    }

    .mf-admin-table-card {
        overflow-x: auto;
    }
}

.mf-admin-pill {
    display: inline-block;
    padding: 0.35rem 0.6rem;
    border: 1px solid rgba(var(--mf-text-rgb), 0.10);
    border-radius: 999px;
    background: rgba(var(--mf-text-rgb), 0.03);
}

.mf-admin-card {
    background: rgba(var(--mf-text-rgb), 0.03);
    border: 1px solid rgba(var(--mf-text-rgb), 0.10);
    border-radius: 1rem;
    backdrop-filter: blur(10px);
    font-variant-numeric: tabular-nums;
}

body.mf-admin-body {
    color-scheme: dark;
    min-height: 100vh;
    overflow-x: hidden;
}

.mf-admin-delta {
    margin-top: 0.25rem;
    font-size: 0.85rem;
    color: rgba(var(--mf-text-rgb), 0.60);
}

.mf-admin-select {
    color-scheme: dark;
    background: rgba(var(--mf-bg-rgb), 0.65);
    border-color: rgba(var(--mf-text-rgb), 0.14);
    color: rgba(var(--mf-text-rgb), 0.92);
}

.mf-admin-select option,
.mf-admin-select optgroup {
    background-color: var(--mf-bg);
    color: var(--mf-text);
}

.mf-admin-input {
    color-scheme: dark;
    background: rgba(var(--mf-bg-rgb), 0.65);
    border-color: rgba(var(--mf-text-rgb), 0.14);
    color: rgba(var(--mf-text-rgb), 0.92);
}

.mf-admin-input[type="file"] {
    color-scheme: dark;
    background: rgba(var(--mf-bg-rgb), 0.65) !important;
    border-color: rgba(var(--mf-text-rgb), 0.14) !important;
    color: rgba(var(--mf-text-rgb), 0.92) !important;
}

.mf-admin-input::placeholder {
    color: rgba(var(--mf-text-rgb), 0.40);
}

.mf-admin-input:focus {
    background: rgba(var(--mf-bg-rgb), 0.65);
    border-color: rgba(var(--mf-primary-rgb), 0.75);
    box-shadow: 0 0 0 0.25rem rgba(var(--mf-primary-rgb), 0.14);
    color: rgba(var(--mf-text-rgb), 0.92);
}

.mf-admin-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.mf-admin-actions,
.mf-admin-bulk-actions {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.45rem;
    flex-wrap: wrap;
}

.mf-admin-action {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.38rem;
    border-radius: 0.62rem;
    border: 1px solid rgba(var(--mf-text-rgb), 0.16);
    background: rgba(var(--mf-text-rgb), 0.03);
    color: rgba(var(--mf-text-rgb), 0.92);
    min-height: 2rem;
    padding: 0.28rem 0.62rem;
    font-weight: 600;
    letter-spacing: 0.01em;
    line-height: 1.1;
    transition: background-color 160ms ease, border-color 160ms ease, color 160ms ease, transform 160ms ease;
}

.mf-admin-action i {
    font-size: 0.88rem;
    line-height: 1;
}

.mf-admin-action:hover {
    background: rgba(var(--mf-text-rgb), 0.08);
    border-color: rgba(var(--mf-text-rgb), 0.24);
    color: rgba(var(--mf-text-rgb), 0.98);
    transform: translateY(-1px);
}

.mf-admin-action:focus-visible {
    outline: none;
    box-shadow: 0 0 0 0.2rem rgba(var(--mf-primary-rgb), 0.24);
}

.mf-admin-action[disabled],
.mf-admin-action.disabled {
    opacity: 0.45;
    cursor: not-allowed;
    transform: none;
}

.mf-admin-action--neutral {
    border-color: rgba(var(--mf-text-rgb), 0.22);
}

.mf-admin-action--primary {
    border-color: rgba(var(--mf-primary-rgb), 0.52);
    background: rgba(var(--mf-primary-rgb), 0.16);
    color: rgba(var(--mf-text-rgb), 0.98);
}

.mf-admin-action--primary:hover {
    border-color: rgba(var(--mf-primary-rgb), 0.72);
    background: rgba(var(--mf-primary-rgb), 0.24);
}

.mf-admin-action--success {
    border-color: rgba(34, 197, 94, 0.56);
    background: rgba(34, 197, 94, 0.14);
    color: #d1fae5;
}

.mf-admin-action--success:hover {
    border-color: rgba(34, 197, 94, 0.74);
    background: rgba(34, 197, 94, 0.22);
    color: #ecfdf5;
}

.mf-admin-action--warning {
    border-color: rgba(247, 186, 78, 0.62);
    background: rgba(247, 186, 78, 0.14);
    color: #fff4d5;
}

.mf-admin-action--warning:hover {
    border-color: rgba(247, 186, 78, 0.78);
    background: rgba(247, 186, 78, 0.22);
    color: #fff8e6;
}

.mf-admin-action--danger {
    border-color: rgba(224, 77, 87, 0.62);
    background: rgba(224, 77, 87, 0.14);
    color: #ffdfe2;
}

.mf-admin-action--danger:hover {
    border-color: rgba(224, 77, 87, 0.8);
    background: rgba(224, 77, 87, 0.22);
    color: #ffeff1;
}

/* File input button styling (remove default white button) */
.mf-admin-input[type="file"]::file-selector-button {
    appearance: none;
    background: rgba(var(--mf-text-rgb), 0.03) !important;
    border: 1px solid rgba(var(--mf-text-rgb), 0.14) !important;
    color: rgba(var(--mf-text-rgb), 0.90) !important;
    border-radius: 0.5rem;
    padding: 0.375rem 0.75rem;
    margin-right: 0.75rem;
}

.mf-admin-input[type="file"]::file-selector-button:hover {
    background: rgba(var(--mf-text-rgb), 0.03) !important;
    border-color: rgba(var(--mf-text-rgb), 0.14) !important;
    color: rgba(var(--mf-text-rgb), 0.90) !important;
}

.mf-admin-input[type="file"]::-webkit-file-upload-button {
    -webkit-appearance: none;
    appearance: none;
    background: rgba(var(--mf-text-rgb), 0.03) !important;
    border: 1px solid rgba(var(--mf-text-rgb), 0.14) !important;
    color: rgba(var(--mf-text-rgb), 0.90) !important;
    border-radius: 0.5rem;
    padding: 0.375rem 0.75rem;
    margin-right: 0.75rem;
}

.mf-admin-input[type="file"]::-webkit-file-upload-button:hover {
    background: rgba(var(--mf-text-rgb), 0.03) !important;
    border-color: rgba(var(--mf-text-rgb), 0.14) !important;
    color: rgba(var(--mf-text-rgb), 0.90) !important;
}

.mf-admin-form-center {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: calc(100vh - 220px);
}

.mf-admin-table-card {
    background: rgba(var(--mf-text-rgb), 0.03);
    border: 1px solid rgba(var(--mf-text-rgb), 0.10);
    border-radius: 1rem;
    /* overflow:hidden breaks position:sticky on thead th — use clip instead */
    overflow: clip;
    backdrop-filter: blur(10px);
}

@media (max-width: 767.98px) {
    /* Horizontal table scroll on mobile (including DataTables scroll body). */
    .mf-admin-table-card {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        touch-action: pan-x pan-y;
    }

    .mf-admin-table-scroll,
    .mf-admin-table-card .dataTables_scrollBody {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        touch-action: pan-x pan-y;
    }

    .mf-admin-table-card .table,
    .mf-admin-table-card .dataTables_scrollHead table,
    .mf-admin-table-card .dataTables_scrollBody table {
        min-width: 860px;
    }

    .mf-admin-table-card td,
    .mf-admin-table-card th {
        white-space: nowrap;
    }

    .mf-admin-table-card .dataTables_scrollBody {
        overflow-x: auto !important;
    }
}

/* Admin toolbars */
.mf-admin-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.75rem;
    flex-wrap: wrap;
}

@media (max-width: 575.98px) {
    .mf-admin-toolbar {
        flex-direction: column;
        align-items: stretch;
    }

    .mf-admin-toolbar__right {
        justify-content: space-between;
    }
}

/* Bulk bar under tables */
.mf-admin-bulkbar {
    width: 100%;
}

@media (max-width: 575.98px) {
    .mf-admin-bulkbar {
        gap: 0.75rem !important;
    }

    .mf-admin-bulkbar .btn {
        width: 100%;
    }
}

/* Mobile typography + spacing tuning for admin */
@media (max-width: 575.98px) {
    .mf-admin-main > .container-fluid {
        padding-left: 1rem !important;
        padding-right: 1rem !important;
        padding-top: 1.25rem !important;
        padding-bottom: calc(3.75rem + env(safe-area-inset-bottom)) !important;
    }

    .mf-admin-main h1.h3 {
        font-size: 1.35rem;
        letter-spacing: -0.01em;
    }
}

/* Table scroll reliability on touch + visual hint */
.mf-admin-table-card {
    position: relative;
}

@media (max-width: 767.98px) {
    .mf-admin-table-scroll {
        display: block;
        max-width: 100%;
        overflow-x: auto;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        touch-action: pan-x pan-y;
    }

    .mf-admin-table-card::after {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        width: 28px;
        pointer-events: none;
        background: linear-gradient(90deg, transparent, rgba(var(--mf-bg-rgb), 0.65));
        opacity: 0.85;
    }
}

.mf-admin-toolbar__search {
    flex: 1 1 auto;
    min-width: min(520px, 100%);
}

.mf-admin-toolbar__search .mf-admin-input {
    width: 100%;
    max-width: var(--mf-admin-search-max, 400px);
}

.mf-admin-toolbar__right {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    flex-wrap: wrap;
}

.mf-admin-toolbar__limit {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
}

.mf-admin-toolbar__create {
    display: inline-flex;
    align-items: center;
    gap: 0.42rem;
    white-space: nowrap;
    border-radius: 0.68rem;
    border-color: rgba(var(--mf-primary-rgb), 0.62);
    background: linear-gradient(135deg, rgba(var(--mf-primary-rgb), 0.92), rgba(var(--mf-primary-rgb), 0.74));
    color: rgba(var(--mf-text-rgb), 0.98);
    box-shadow: 0 10px 24px rgba(var(--mf-primary-rgb), 0.24);
    font-weight: 700;
    letter-spacing: 0.01em;
}

.mf-admin-toolbar__create:hover {
    border-color: rgba(var(--mf-primary-rgb), 0.8);
    background: linear-gradient(135deg, rgba(var(--mf-primary-rgb), 0.98), rgba(var(--mf-primary-rgb), 0.82));
    color: rgba(var(--mf-text-rgb), 1);
    transform: translateY(-1px);
}

.mf-admin-toolbar__create i {
    font-size: 0.82rem;
}

.mf-admin-toolbar__create:focus-visible {
    outline: none;
    box-shadow: 0 0 0 0.2rem rgba(var(--mf-primary-rgb), 0.28);
}

.mf-admin-toolbar__create.btn-primary,
.mf-admin-toolbar__create.btn.btn-primary {
    --bs-btn-border-color: rgba(var(--mf-primary-rgb), 0.62);
    --bs-btn-bg: transparent;
    --bs-btn-color: rgba(var(--mf-text-rgb), 0.98);
    --bs-btn-hover-border-color: rgba(var(--mf-primary-rgb), 0.8);
    --bs-btn-hover-bg: transparent;
    --bs-btn-hover-color: rgba(var(--mf-text-rgb), 1);
    --bs-btn-active-border-color: rgba(var(--mf-primary-rgb), 0.86);
    --bs-btn-active-bg: transparent;
}

.mf-admin-toolbar__create.btn-sm {
    padding-inline: 0.74rem;
}

.mf-admin-toolbar__create span {
    white-space: nowrap;
}

.mf-admin-apply-btn {
    color: rgba(var(--mf-text-rgb), 0.98);
    border: 1px solid rgba(var(--mf-primary-rgb), 0.45);
    border-radius: 999px;
    font-weight: 700;
    letter-spacing: 0.01em;
    padding: 0.36rem 0.85rem;
    background:
        radial-gradient(120% 140% at 20% 10%, rgba(var(--mf-primary-rgb), 0.34), transparent 58%),
        linear-gradient(165deg, rgba(var(--mf-primary-rgb), 0.3), rgba(var(--mf-panel-rgb), 0.88));
    box-shadow:
        0 12px 24px rgba(0, 0, 0, 0.28),
        0 0 0 1px rgba(var(--mf-primary-rgb), 0.16) inset;
    transition: transform 160ms ease, box-shadow 180ms ease, border-color 180ms ease;
}

.mf-admin-apply-btn:hover {
    color: rgba(var(--mf-text-rgb), 0.98);
    border-color: rgba(var(--mf-primary-rgb), 0.6);
    transform: translateY(-1px);
    box-shadow:
        0 16px 28px rgba(0, 0, 0, 0.34),
        0 0 0 1px rgba(var(--mf-primary-rgb), 0.24) inset;
}

.mf-admin-apply-btn:focus-visible {
    color: rgba(var(--mf-text-rgb), 0.98);
    outline: 2px solid rgba(var(--mf-primary-rgb), 0.58);
    outline-offset: 2px;
}

.mf-admin-reset-btn {
    border-radius: 999px;
    border-color: rgba(var(--mf-text-rgb), 0.2);
    color: rgba(var(--mf-text-rgb), 0.86);
}

.mf-admin-reset-btn:hover {
    border-color: rgba(var(--mf-text-rgb), 0.35);
    color: rgba(var(--mf-text-rgb), 0.98);
    background: rgba(var(--mf-text-rgb), 0.06);
}

@media (max-width: 575.98px) {
    .mf-admin-toolbar__search .mf-admin-input {
        max-width: none;
    }
}

.mf-admin-table-scroll {
    max-height: 420px;
    overflow-x: auto;
    overflow-y: auto;
    overscroll-behavior: contain;
    -webkit-overflow-scrolling: touch;
    touch-action: pan-x pan-y;
}

.mf-admin-table-card .table {
    --bs-table-bg: transparent;
    --bs-table-color: rgba(var(--mf-text-rgb), 0.90);
    --bs-table-hover-bg: rgba(var(--mf-text-rgb), 0.04);
    --bs-table-border-color: rgba(var(--mf-text-rgb), 0.06);
    margin-bottom: 0;
    border-color: rgba(var(--mf-text-rgb), 0.06);
}

.mf-admin-table-card .table > :not(caption) > * > * {
    border-bottom-color: rgba(var(--mf-text-rgb), 0.06);
}

.mf-admin-table-card thead th {
    position: sticky;
    top: 0;
    background: rgba(var(--mf-bg-rgb), 0.88);
    backdrop-filter: blur(10px);
    border-bottom-color: rgba(var(--mf-text-rgb), 0.12);
    z-index: 2;
    text-align: center !important;
    vertical-align: middle !important;
}

/* DataTables integration (Admin tables) */
.mf-admin-table-card .dataTables_wrapper {
    padding: 0;
}

/* Ensure DataTables sortable headers maintain center alignment and sticky position.
   dataTables.bootstrap5.css sets position:relative on .sorting/.sorting_asc/.sorting_desc
   which overrides position:sticky — force sticky back here. */
.mf-admin-table-card table.dataTable thead th.sorting,
.mf-admin-table-card table.dataTable thead th.sorting_asc,
.mf-admin-table-card table.dataTable thead th.sorting_desc {
    position: sticky !important;
    top: 0 !important;
    z-index: 2 !important;
    text-align: center !important;
    vertical-align: middle !important;
    padding-left: 0.75rem !important;
    padding-right: 0.75rem !important;
}




.mf-admin-table-card .dataTables_scrollHead {
    background: rgba(var(--mf-bg-rgb), 0.65);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(var(--mf-text-rgb), 0.10);
}

.mf-admin-table-card .dataTables_scrollHead table,
.mf-admin-table-card .dataTables_scrollBody table {
    margin-bottom: 0 !important;
}

.mf-admin-table-card .dataTables_info {
    color: rgba(var(--mf-text-rgb), 0.60);
    padding: 0.75rem 1rem;
}

.mf-admin-table-card .dataTables_paginate {
    padding: 0.75rem 1rem;
}

/* ── Empty-state row ──────────────────────────── */
.mf-admin-empty-state {
    padding: 3rem 1rem !important;
    text-align: center !important;
    background: transparent !important;
}

.mf-admin-empty-state-inner {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.65rem;
}

.mf-admin-empty-state-icon {
    font-size: 2.5rem;
    color: rgba(var(--mf-text-rgb), 0.22);
    line-height: 1;
}

.mf-admin-empty-state-msg {
    margin: 0;
    color: rgba(var(--mf-text-rgb), 0.45);
    font-size: 0.93rem;
}

@media (max-width: 767.98px) {
    .mf-admin-empty-state-row td.mf-admin-empty-state::before {
        content: none !important;
    }
}

.mf-admin-pagination {
    gap: 0.35rem;
}

.mf-admin-pagination .page-item {
    margin: 0;
}

.mf-admin-pagination .page-link {
    min-width: 2.1rem;
    height: 2.1rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.35rem 0.62rem;
    border-radius: 999px;
    border: 1px solid rgba(var(--mf-text-rgb), 0.14);
    background: linear-gradient(160deg, rgba(var(--mf-panel-rgb), 0.86), rgba(var(--mf-panel-rgb), 0.7));
    color: rgba(var(--mf-text-rgb), 0.92);
    font-weight: 600;
    box-shadow: 0 10px 22px rgba(0, 0, 0, 0.24);
    transition: transform 160ms ease, border-color 180ms ease, background 180ms ease, color 160ms ease;
}

.mf-admin-pagination .page-link:hover {
    border-color: rgba(var(--mf-primary-rgb), 0.45);
    background: linear-gradient(160deg, rgba(var(--mf-primary-rgb), 0.2), rgba(var(--mf-panel-rgb), 0.72));
    color: rgba(var(--mf-text-rgb), 0.98);
    transform: translateY(-1px);
}

.mf-admin-pagination .page-link:focus-visible {
    outline: 2px solid rgba(var(--mf-primary-rgb), 0.5);
    outline-offset: 1px;
}

.mf-admin-pagination .page-item.active .page-link {
    color: rgba(var(--mf-text-rgb), 0.98);
    border-color: rgba(var(--mf-primary-rgb), 0.55);
    background:
        radial-gradient(120% 120% at 20% 20%, rgba(var(--mf-primary-rgb), 0.35), transparent 55%),
        linear-gradient(160deg, rgba(var(--mf-primary-rgb), 0.28), rgba(var(--mf-panel-rgb), 0.86));
    box-shadow:
        0 14px 26px rgba(0, 0, 0, 0.3),
        0 0 0 1px rgba(var(--mf-primary-rgb), 0.18) inset;
}

.mf-admin-pagination .page-item.disabled .page-link {
    opacity: 0.45;
    color: rgba(var(--mf-text-rgb), 0.58);
    background: rgba(var(--mf-panel-rgb), 0.55);
    border-color: rgba(var(--mf-text-rgb), 0.08);
    box-shadow: none;
}


/* Navbar Styling */
.mf-navbar {
    background: rgba(var(--mf-text-rgb), 0.03);
    border-bottom: 1px solid rgba(var(--mf-text-rgb), 0.10);
    backdrop-filter: blur(10px);
    padding: 0.75rem 0;
    position: relative;
    z-index: 1040;
}

/* Quiz catalog cards */
.mf-quiz-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 0.9rem;
}

/* Quiz details page (single card) */
.mf-quiz-details {
    min-height: 0;
    max-width: 980px;
    margin: 0 auto;
}

@media (hover: hover) {
    .mf-quiz-details:hover {
        transform: none;
        filter: none;
    }
}

.mf-quiz-details .mf-quiz-card__cover {
    padding: 1.15rem 1.15rem 0.9rem;
}

.mf-quiz-details .mf-quiz-card__content {
    padding: 0.2rem 1.15rem 1rem;
}

.mf-quiz-details__kicker {
    font-size: 0.78rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: rgba(var(--mf-text-rgb), 0.62);
    margin-bottom: 0.35rem;
}

.mf-quiz-details__stats {
    margin-top: 0.9rem;
    display: flex;
    flex-wrap: wrap;
    gap: 0.55rem;
}

.mf-quiz-details__submeta {
    margin-top: 0.75rem;
    display: flex;
    flex-wrap: wrap;
    gap: 0.9rem;
}

/* Stats panels (user-facing) */
.mf-stats-panel {
    border-radius: 1.25rem;
    overflow: hidden;
    background:
        radial-gradient(1100px circle at 12% 15%, rgba(var(--mf-primary-rgb), 0.12), transparent 52%),
        rgba(var(--mf-text-rgb), 0.03);
    border: 1px solid rgba(var(--mf-text-rgb), 0.10);
    backdrop-filter: blur(10px);
    box-shadow: 0 18px 55px rgba(0, 0, 0, 0.45);
}

.mf-stats-panel__header {
    padding: 1rem 1.05rem;
    border-bottom: 1px solid rgba(var(--mf-text-rgb), 0.10);
    background: rgba(var(--mf-bg-rgb), 0.18);
}

.mf-stats-panel__body {
    padding: 0.9rem 1.05rem 1.05rem;
}

.mf-stats-panel .table {
    --bs-table-bg: transparent;
    --bs-table-color: rgba(var(--mf-text-rgb), 0.90);
    --bs-table-striped-bg: rgba(var(--mf-text-rgb), 0.03);
    --bs-table-striped-color: rgba(var(--mf-text-rgb), 0.92);
}

.mf-stats-panel .table thead th {
    border-bottom-color: rgba(var(--mf-text-rgb), 0.12);
    color: rgba(var(--mf-text-rgb), 0.70);
    font-weight: 800;
    letter-spacing: 0.01em;
}

.mf-stats-panel .btn {
    border-radius: 0.85rem;
    padding: 0.62rem 0.85rem;
    font-weight: 800;
    letter-spacing: 0.01em;
    transition: transform 160ms ease, box-shadow 220ms ease, background 180ms ease, border-color 180ms ease, color 180ms ease;
}

.mf-stats-panel .btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 0.25rem rgba(var(--mf-primary-rgb), 0.18);
}

.mf-stats-panel .btn-primary {
    border: 1px solid rgba(var(--mf-text-rgb), 0.12);
    background:
        radial-gradient(120% 140% at 20% 10%, rgba(255, 255, 255, 0.18), transparent 55%),
        linear-gradient(135deg, rgba(var(--mf-primary-rgb), 0.92), rgba(var(--mf-primary-rgb), 0.72));
    box-shadow:
        0 16px 34px rgba(0, 0, 0, 0.44),
        0 0 0 1px rgba(255, 255, 255, 0.06) inset;
}

.mf-stats-panel .btn-primary:hover {
    border-color: rgba(var(--mf-primary-rgb), 0.55);
    transform: translateY(-1px);
    box-shadow:
        0 22px 46px rgba(0, 0, 0, 0.55),
        0 0 0 1px rgba(var(--mf-primary-rgb), 0.18) inset;
}

.mf-stats-panel .btn-outline-light {
    border-color: rgba(var(--mf-text-rgb), 0.18);
    background: rgba(var(--mf-text-rgb), 0.04);
    color: rgba(var(--mf-text-rgb), 0.92);
    box-shadow: 0 12px 26px rgba(0, 0, 0, 0.28);
}

.mf-stats-panel .btn-outline-light:hover {
    border-color: rgba(var(--mf-primary-rgb), 0.42);
    background: rgba(var(--mf-primary-rgb), 0.10);
    transform: translateY(-1px);
}

.mf-quiz-details .mf-quiz-card__actions {
    padding: 0 1.15rem 1.15rem;
    grid-template-columns: 1fr;
}

@media (min-width: 576px) {
    .mf-quiz-details .mf-quiz-card__actions {
        grid-template-columns: 1fr 1fr;
    }
}

@media (min-width: 992px) {
    .mf-quiz-details .mf-quiz-card__actions {
        grid-template-columns: 1fr 1fr 1fr 1fr;
    }
}

@media (min-width: 576px) {
    .mf-quiz-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }
}

@media (min-width: 992px) {
    .mf-quiz-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 1rem;
    }
}

.mf-quiz-card {
    --mf-quiz-accent-rgb: var(--mf-primary-rgb);
    --mf-quiz-accent-a: 0.18;
    border-radius: 1.25rem;
    overflow: hidden;
    position: relative;
    isolation: isolate;
    display: flex;
    flex-direction: column;
    min-height: 260px;
    background:
        radial-gradient(1200px circle at 10% 12%, rgba(var(--mf-quiz-accent-rgb), var(--mf-quiz-accent-a)), transparent 48%),
        radial-gradient(900px circle at 100% 80%, rgba(var(--mf-text-rgb), 0.06), transparent 55%),
        linear-gradient(180deg, rgba(var(--mf-text-rgb), 0.06), rgba(var(--mf-text-rgb), 0.02));
    box-shadow:
        0 18px 55px rgba(0, 0, 0, 0.55),
        0 0 0 1px rgba(var(--mf-text-rgb), 0.10) inset;
    transition: transform 220ms ease, box-shadow 240ms ease, filter 240ms ease;
}

.mf-quiz-card::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    z-index: 0;
    background:
        radial-gradient(900px circle at 0% 0%, rgba(var(--mf-quiz-accent-rgb), calc(var(--mf-quiz-accent-a) + 0.04)), transparent 55%),
        radial-gradient(700px circle at 70% 115%, rgba(var(--mf-text-rgb), 0.05), transparent 65%);
    opacity: 0.85;
}

.mf-quiz-card::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    z-index: 0;
    background: linear-gradient(135deg, rgba(var(--mf-quiz-accent-rgb), 0.35), rgba(var(--mf-text-rgb), 0.12), rgba(var(--mf-quiz-accent-rgb), 0.08));
    opacity: 0;
}

.mf-quiz-card > * {
    position: relative;
    z-index: 1;
}

@supports (mask-composite: exclude) {
    .mf-quiz-card {
        box-shadow:
            0 18px 55px rgba(0, 0, 0, 0.55);
    }

    .mf-quiz-card > * {
        z-index: 2;
    }

    .mf-quiz-card::after {
        opacity: 1;
        padding: 1px;
        background: linear-gradient(135deg, rgba(var(--mf-quiz-accent-rgb), 0.46), rgba(var(--mf-text-rgb), 0.22), rgba(var(--mf-quiz-accent-rgb), 0.10));
        -webkit-mask:
            linear-gradient(#000 0 0) content-box,
            linear-gradient(#000 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
    }
}

@media (hover: hover) and (prefers-reduced-motion: no-preference) {
    .mf-quiz-card:hover {
        transform: translateY(-8px);
        filter: saturate(1.06);
        box-shadow:
            0 28px 85px rgba(0, 0, 0, 0.62),
            0 0 0 1px rgba(var(--mf-quiz-accent-rgb), 0.16) inset;
    }

    .mf-quiz-card:hover::after {
        opacity: 0.10;
    }
}

.mf-quiz-card__cover {
    padding: 1rem 1rem 0.75rem;
}

.mf-quiz-card__cover-inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
}

.mf-quiz-card__icon {
    width: 48px;
    height: 48px;
    border-radius: 16px;
    display: grid;
    place-items: center;
    color: rgba(var(--mf-text-rgb), 0.98);
    background:
        linear-gradient(135deg, rgba(var(--mf-quiz-accent-rgb), 0.78), rgba(var(--mf-text-rgb), 0.10)),
        rgba(0, 0, 0, 0.16);
    box-shadow:
        0 18px 34px rgba(0, 0, 0, 0.42),
        0 0 0 1px rgba(255, 255, 255, 0.08) inset;
}

.mf-quiz-card__icon i {
    font-size: 1.12rem;
}

.mf-quiz-card__cover-meta {
    flex: 1 1 auto;
    min-width: 0;
}

.mf-quiz-card__category {
    font-size: 0.84rem;
    color: rgba(var(--mf-text-rgb), 0.68);
    font-weight: 650;
    letter-spacing: 0.01em;
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.mf-quiz-card__rightmeta {
    display: flex;
    align-items: center;
    gap: 0.55rem;
    flex: 0 0 auto;
}

.mf-quiz-diff {
    --mf-diff-rgb: var(--mf-secondary-rgb);
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 0.7rem;
    border-radius: 999px;
    border: 1px solid rgba(var(--mf-diff-rgb), 0.35);
    background: rgba(var(--mf-diff-rgb), 0.10);
    color: rgba(var(--mf-text-rgb), 0.92);
    white-space: nowrap;
    box-shadow: 0 14px 30px rgba(0, 0, 0, 0.32);
    max-width: 210px;
}

.mf-quiz-diff__dot {
    width: 10px;
    height: 10px;
    border-radius: 999px;
    background: rgba(var(--mf-diff-rgb), 0.95);
    box-shadow: 0 0 0 3px rgba(var(--mf-diff-rgb), 0.18);
    flex: 0 0 auto;
}

.mf-quiz-diff__text {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    min-width: 0;
    font-weight: 800;
    letter-spacing: -0.01em;
}

.mf-quiz-diff--easy { --mf-diff-rgb: 25, 135, 84; }
.mf-quiz-diff--medium { --mf-diff-rgb: var(--mf-primary-rgb); }
.mf-quiz-diff--hard { --mf-diff-rgb: 220, 53, 69; }
.mf-quiz-diff--default { --mf-diff-rgb: var(--mf-secondary-rgb); }

.mf-quiz-stat {
    display: inline-flex;
    align-items: center;
    gap: 0.45rem;
    padding: 0.5rem 0.7rem;
    border-radius: 999px;
    border: 1px solid rgba(var(--mf-primary-rgb), 0.25);
    background: rgba(var(--mf-primary-rgb), 0.10);
    color: rgba(var(--mf-text-rgb), 0.92);
    box-shadow: 0 14px 30px rgba(0, 0, 0, 0.32);
    white-space: nowrap;
}

.mf-quiz-stat > i {
    color: rgba(var(--mf-primary-rgb), 0.98);
}

.mf-quiz-stat__value {
    font-weight: 900;
    letter-spacing: -0.02em;
}

.mf-quiz-stat__label {
    color: rgba(var(--mf-text-rgb), 0.72);
    font-size: 0.82rem;
}

/* (replaced by .mf-quiz-stat) */

.mf-quiz-card__content {
    padding: 0.15rem 1rem 1rem;
    flex: 1 1 auto;
}

.mf-quiz-card__title {
    font-weight: 900;
    letter-spacing: -0.02em;
    color: rgba(var(--mf-text-rgb), 0.98);
    line-height: 1.12;
    font-size: 1.18rem;
    text-wrap: balance;
}

.mf-quiz-card__desc {
    margin: 0;
    margin-top: 0.55rem;
    color: rgba(var(--mf-text-rgb), 0.72);
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 4;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.mf-quiz-card__actions {
    padding: 0 1rem 1rem;
    display: grid;
    grid-template-columns: 1fr;
    gap: 0.6rem;
}

.mf-quiz-card__cta {
    width: 100%;
}

.mf-quiz-card__cta:hover {
    border-color: rgba(var(--mf-quiz-accent-rgb), 0.55);
}

.mf-quiz-card__secondary {
    width: 100%;
}

/* Quiz take/review stepper */
.mf-quiz-step {
    padding: 0.25rem 0;
}

/* Quiz runner (take) */
.mf-quiz-runner {
    border-radius: 1.25rem;
    overflow: hidden;
    background: rgba(var(--mf-text-rgb), 0.03);
    border: 1px solid rgba(var(--mf-text-rgb), 0.10);
    backdrop-filter: blur(10px);
}

/* Buttons: modern, but scoped to quiz UIs */
.mf-quiz-runner .btn,
.mf-quiz-card .btn {
    border-radius: 0.95rem;
    padding: 0.82rem 1rem;
    font-weight: 800;
    letter-spacing: 0.01em;
    transition: transform 160ms ease, box-shadow 220ms ease, background 180ms ease, border-color 180ms ease, color 180ms ease;
}

.mf-quiz-runner .btn.btn-sm,
.mf-quiz-card .btn.btn-sm {
    padding: 0.62rem 0.85rem;
    border-radius: 0.85rem;
}

.mf-quiz-runner .btn:focus-visible,
.mf-quiz-card .btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 0.25rem rgba(var(--mf-primary-rgb), 0.18);
}

.mf-quiz-runner .btn-primary,
.mf-quiz-card .btn-primary {
    border: 1px solid rgba(var(--mf-text-rgb), 0.12);
    background:
        radial-gradient(120% 140% at 20% 10%, rgba(255, 255, 255, 0.18), transparent 55%),
        linear-gradient(135deg, rgba(var(--mf-primary-rgb), 0.92), rgba(var(--mf-primary-rgb), 0.72));
    box-shadow:
        0 16px 34px rgba(0, 0, 0, 0.44),
        0 0 0 1px rgba(255, 255, 255, 0.06) inset;
}

.mf-quiz-runner .btn-primary:hover,
.mf-quiz-card .btn-primary:hover {
    border-color: rgba(var(--mf-primary-rgb), 0.55);
    transform: translateY(-1px);
    box-shadow:
        0 22px 46px rgba(0, 0, 0, 0.55),
        0 0 0 1px rgba(var(--mf-primary-rgb), 0.18) inset;
}

.mf-quiz-runner .btn-outline-light,
.mf-quiz-card .btn-outline-light {
    border-color: rgba(var(--mf-text-rgb), 0.18);
    background: rgba(var(--mf-text-rgb), 0.04);
    color: rgba(var(--mf-text-rgb), 0.92);
    box-shadow: 0 12px 26px rgba(0, 0, 0, 0.28);
}

.mf-quiz-runner .btn-outline-light:hover,
.mf-quiz-card .btn-outline-light:hover {
    border-color: rgba(var(--mf-primary-rgb), 0.42);
    background: rgba(var(--mf-primary-rgb), 0.10);
    transform: translateY(-1px);
}

.mf-quiz-runner .btn:disabled,
.mf-quiz-card .btn:disabled {
    opacity: 0.55;
    transform: none;
    box-shadow: none;
}

.mf-quiz-runner__header {
    padding: 1.1rem 1.1rem 0.9rem;
    background:
        radial-gradient(900px circle at 12% 18%, rgba(var(--mf-primary-rgb), 0.18), transparent 52%),
        rgba(var(--mf-text-rgb), 0.02);
    border-bottom: 1px solid rgba(var(--mf-text-rgb), 0.08);
}

.mf-quiz-runner__titlewrap {
    display: flex;
    flex-direction: column;
    gap: 0.2rem;
}

.mf-quiz-runner__kicker {
    font-size: 0.78rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: rgba(var(--mf-text-rgb), 0.62);
}

.mf-quiz-runner__title {
    margin: 0;
    font-size: 1.35rem;
    font-weight: 900;
    letter-spacing: -0.02em;
    color: rgba(var(--mf-text-rgb), 0.98);
    line-height: 1.08;
}

.mf-quiz-runner__meta {
    margin-top: 0.85rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
    flex-wrap: wrap;
}

.mf-quiz-runner__step {
    display: inline-flex;
    align-items: baseline;
    gap: 0.5rem;
    white-space: nowrap;
}

.mf-quiz-runner__progress {
    flex: 1 1 220px;
    min-width: 200px;
    height: 10px;
    border-radius: 999px;
    border: 1px solid rgba(var(--mf-text-rgb), 0.10);
    background: rgba(0, 0, 0, 0.22);
    overflow: hidden;
}

.mf-quiz-runner__progress-fill {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, rgba(var(--mf-primary-rgb), 0.95), rgba(var(--mf-primary-rgb), 0.45));
    border-radius: inherit;
    transition: width 200ms ease;
}

.mf-quiz-runner__actions {
    display: flex;
    align-items: center;
    gap: 0.6rem;
}

.mf-quiz-runner__body {
    padding: 1.1rem;
}

.mf-quiz-question {
    padding: 0.6rem 0.6rem 0.9rem;
}

.mf-quiz-question__text {
    font-size: 1.15rem;
    font-weight: 850;
    letter-spacing: -0.01em;
    color: rgba(var(--mf-text-rgb), 0.98);
    line-height: 1.25;
    text-wrap: balance;
}

.mf-quiz-options {
    margin-top: 0.85rem;
    display: grid;
    gap: 0.65rem;
}

.mf-quiz-optionRow {
    position: relative;
}

.mf-quiz-option__input {
    position: absolute;
    opacity: 0;
    pointer-events: none;
}

.mf-quiz-option {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.9rem;
    padding: 0.95rem 1rem;
    border-radius: 1rem;
    border: 1px solid rgba(var(--mf-text-rgb), 0.12);
    background: rgba(0, 0, 0, 0.18);
    color: rgba(var(--mf-text-rgb), 0.92);
    cursor: pointer;
    transition: transform 160ms ease, border-color 160ms ease, background 160ms ease, box-shadow 220ms ease;
}

.mf-quiz-option:hover {
    border-color: rgba(var(--mf-primary-rgb), 0.42);
    background: rgba(var(--mf-text-rgb), 0.03);
}

.mf-quiz-option__text {
    min-width: 0;
    line-height: 1.35;
}

.mf-quiz-option__afford {
    width: 20px;
    height: 20px;
    border-radius: 999px;
    border: 1px solid rgba(var(--mf-text-rgb), 0.22);
    background: rgba(var(--mf-text-rgb), 0.02);
    flex: 0 0 auto;
    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.25) inset;
}

.mf-quiz-option__input:focus-visible + .mf-quiz-option {
    outline: none;
    box-shadow: 0 0 0 0.25rem rgba(var(--mf-primary-rgb), 0.18);
    border-color: rgba(var(--mf-primary-rgb), 0.65);
}

.mf-quiz-option__input:checked + .mf-quiz-option {
    border-color: rgba(var(--mf-primary-rgb), 0.75);
    background: rgba(var(--mf-primary-rgb), 0.14);
    box-shadow:
        0 14px 30px rgba(0, 0, 0, 0.40),
        0 0 0 1px rgba(var(--mf-primary-rgb), 0.16) inset;
}

.mf-quiz-option__input:checked + .mf-quiz-option .mf-quiz-option__afford {
    border-color: rgba(var(--mf-primary-rgb), 0.85);
    background: radial-gradient(circle at 35% 35%, rgba(var(--mf-primary-rgb), 0.85), rgba(var(--mf-primary-rgb), 0.35));
}

.mf-quiz-textarea {
    margin-top: 0.85rem;
    background: rgba(0, 0, 0, 0.22);
    border-color: rgba(var(--mf-text-rgb), 0.14);
    color: rgba(var(--mf-text-rgb), 0.94);
    border-radius: 1rem;
    padding: 0.95rem 1rem;
}

.mf-quiz-textarea:focus {
    background: rgba(0, 0, 0, 0.22);
    border-color: rgba(var(--mf-primary-rgb), 0.70);
    box-shadow: 0 0 0 0.25rem rgba(var(--mf-primary-rgb), 0.14);
    color: rgba(var(--mf-text-rgb), 0.96);
}

.mf-quiz-runner__nav {
    padding: 1rem 1.1rem 1.1rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.75rem;
    border-top: 1px solid rgba(var(--mf-text-rgb), 0.08);
    background: rgba(var(--mf-bg-rgb), 0.20);
}

.mf-quiz-runner__nav-right {
    display: flex;
    align-items: center;
    gap: 0.6rem;
}

/* SweetAlert2 (logout confirmation) */
.swal2-container.mf-swal2-container {
    padding: 1.25rem;
    background: rgba(0, 0, 0, 0.55) !important;
    backdrop-filter: blur(6px);
}

.swal2-popup.mf-swal2-popup {
    width: min(520px, calc(100vw - 2.5rem));
    border-radius: 1.25rem;
    padding: 1.15rem 1.15rem 1rem;
    background:
        radial-gradient(900px circle at 12% 18%, rgba(var(--mf-primary-rgb), 0.18), transparent 55%),
        rgba(var(--mf-bg-rgb), 0.90);
    color: rgba(var(--mf-text-rgb), 0.92) !important;
    border: 1px solid rgba(var(--mf-text-rgb), 0.12) !important;
    box-shadow:
        0 28px 90px rgba(0, 0, 0, 0.70),
        0 0 0 1px rgba(var(--mf-text-rgb), 0.06) inset;
    backdrop-filter: blur(12px);
}

.swal2-title.mf-swal2-title {
    color: rgba(var(--mf-text-rgb), 0.98) !important;
    font-weight: 900;
    letter-spacing: -0.02em;
}

.swal2-html-container.mf-swal2-html {
    color: rgba(var(--mf-text-rgb), 0.72) !important;
    line-height: 1.5;
}

.swal2-actions.mf-swal2-actions {
    width: 100%;
    margin: 1rem 0 0;
    display: grid;
    grid-template-columns: 1fr;
    gap: 0.6rem;
}

@media (min-width: 480px) {
    .mf-swal2-actions {
        grid-template-columns: 1fr 1fr;
    }
}

.swal2-actions.mf-swal2-actions .btn {
    width: 100%;
}

.swal2-actions.mf-swal2-actions .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.55rem;
    border-radius: 1rem;
    padding: 0.85rem 1rem;
    font-weight: 850;
    letter-spacing: 0.01em;
    transition: transform 160ms ease, box-shadow 220ms ease, background 180ms ease, border-color 180ms ease, color 180ms ease;
}

.swal2-actions.mf-swal2-actions .btn i {
    font-size: 1.05rem;
    opacity: 0.95;
}

.swal2-actions.mf-swal2-actions .btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 0.25rem rgba(var(--mf-primary-rgb), 0.18);
}

.swal2-actions.mf-swal2-actions .mf-swal2-confirm {
    border: 1px solid rgba(var(--mf-text-rgb), 0.12);
    background:
        radial-gradient(120% 140% at 20% 10%, rgba(255, 255, 255, 0.16), transparent 55%),
        linear-gradient(135deg, rgba(var(--mf-primary-rgb), 0.92), rgba(var(--mf-primary-rgb), 0.72));
    box-shadow:
        0 18px 40px rgba(0, 0, 0, 0.52),
        0 0 0 1px rgba(255, 255, 255, 0.06) inset;
}

.swal2-actions.mf-swal2-actions .mf-swal2-confirm:hover {
    border-color: rgba(var(--mf-primary-rgb), 0.55);
    transform: translateY(-1px);
    box-shadow:
        0 24px 54px rgba(0, 0, 0, 0.62),
        0 0 0 1px rgba(var(--mf-primary-rgb), 0.18) inset;
}

.swal2-actions.mf-swal2-actions .mf-swal2-cancel {
    border-color: rgba(var(--mf-text-rgb), 0.18);
    background: rgba(var(--mf-text-rgb), 0.04);
    color: rgba(var(--mf-text-rgb), 0.92);
    box-shadow: 0 14px 28px rgba(0, 0, 0, 0.32);
}

.swal2-actions.mf-swal2-actions .mf-swal2-cancel:hover {
    border-color: rgba(var(--mf-primary-rgb), 0.42);
    background: rgba(var(--mf-primary-rgb), 0.10);
    transform: translateY(-1px);
}

.swal2-icon.mf-swal2-icon.swal2-warning {
    border-color: rgba(var(--mf-primary-rgb), 0.55) !important;
    color: rgba(var(--mf-primary-rgb), 0.95) !important;
}

.mf-swal2-animate-in {
    animation: mf-swal2-in 180ms ease-out both;
}

.mf-swal2-animate-out {
    animation: mf-swal2-out 140ms ease-in both;
}

@keyframes mf-swal2-in {
    0% { transform: translateY(10px) scale(0.98); opacity: 0; }
    100% { transform: translateY(0) scale(1); opacity: 1; }
}

@keyframes mf-swal2-out {
    0% { transform: translateY(0) scale(1); opacity: 1; }
    100% { transform: translateY(8px) scale(0.99); opacity: 0; }
}

.mf-answer-box {
    padding: 0.75rem 0.9rem;
    border-radius: 0.75rem;
    border: 1px solid rgba(var(--mf-text-rgb), 0.12);
    background: rgba(0, 0, 0, 0.18);
    color: rgba(var(--mf-text-rgb), 0.92);
    line-height: 1.45;
    white-space: pre-wrap;
}

.mf-answer-box--correct {
    border-color: rgba(25, 135, 84, 0.55);
    background: rgba(25, 135, 84, 0.14);
}

.mf-answer-box--wrong {
    border-color: rgba(220, 53, 69, 0.55);
    background: rgba(220, 53, 69, 0.10);
}

.mf-answer-choice {
    padding: 0.75rem 0.9rem;
    border-radius: 0.75rem;
    border: 1px solid rgba(var(--mf-text-rgb), 0.10);
    background: rgba(var(--mf-text-rgb), 0.03);
    margin-bottom: 0.6rem;
}

.mf-answer-choice--correct {
    border-color: rgba(25, 135, 84, 0.55);
    background: rgba(25, 135, 84, 0.10);
}

.mf-answer-choice--wrong {
    border-color: rgba(220, 53, 69, 0.55);
    background: rgba(220, 53, 69, 0.08);
}

.mf-answer-choice--chosen {
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.08) inset;
}

.mf-navbar .navbar-brand {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--mf-text);
    letter-spacing: 0.2px;
    transition: color 0.2s ease;
    display: flex;
    align-items: center;
    padding-top: 0;
    padding-bottom: 0;
}

.mf-navbar .navbar-brand .mf-logo {
    height: 3.2rem;
    width: auto;
    object-fit: contain;
}

.mf-navbar .navbar-brand:hover {
    color: var(--mf-primary);
}

.mf-navbar .nav-link {
    color: rgba(var(--mf-text-rgb), 0.78);
    font-weight: 500;
    padding: 0.5rem 1rem;
    border-radius: 0.5rem;
    transition: color 0.2s ease, background-color 0.2s ease;
    margin: 0 0.25rem;
}

.mf-navbar .nav-link:hover {
    color: var(--mf-text);
    background: rgba(var(--mf-text-rgb), 0.05);
}

.mf-navbar .nav-link.active {
    color: var(--mf-primary);
    background: rgba(var(--mf-primary-rgb), 0.12);
}

.mf-navbar .navbar-toggler {
    border-color: rgba(var(--mf-text-rgb), 0.12);
    padding: 0.5rem 0.75rem;
}

.mf-navbar .navbar-toggler:focus {
    box-shadow: 0 0 0 0.25rem rgba(var(--mf-primary-rgb), 0.14);
}

.mf-navbar .navbar-toggler-icon {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(234, 233, 252, 0.78)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
}

@media (max-width: 991.98px) {
    .mf-navbar {
        /* On mobile the landing is very vivid; make nav readable. */
        background: rgba(var(--mf-bg-rgb), 0.92);
        backdrop-filter: blur(12px);
    }

    .mf-navbar .navbar-collapse {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        z-index: 1040;

        /* Make the menu readable on top of vivid landing visuals. */
        background: rgba(var(--mf-bg-rgb), 0.96);
        backdrop-filter: blur(14px);
        border-top: 1px solid rgba(var(--mf-text-rgb), 0.10);
        border-bottom: 1px solid rgba(var(--mf-text-rgb), 0.10);

        box-shadow: 0 22px 60px rgba(0, 0, 0, 0.55);

        overflow: visible;
        max-height: calc(100vh - 72px);
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;

        /* replaces the old mt/pt so it doesn't push content */
        margin-top: 0;
        padding-top: 0;
        padding-bottom: 0;
    }

    .mf-navbar.mf-nav-open .navbar-collapse {
        display: block;
        animation: mfNavIn 260ms ease both;
        padding-top: 0.75rem;
        padding-bottom: 0.75rem;
    }

    .mf-navbar.mf-nav-closing .navbar-collapse {
        display: block;
        animation: mfNavOut 260ms ease both;
        padding-top: 0.75rem;
        padding-bottom: 0.75rem;
    }

    @keyframes mfNavIn {
        from { opacity: 0; transform: translateY(-6px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @keyframes mfNavOut {
        from { opacity: 1; transform: translateY(0); }
        to { opacity: 0; transform: translateY(-6px); }
    }

    .mf-navbar .nav-link {
        padding: 0.75rem 1rem;
        margin: 0.25rem 0;
    }

    .mf-navbar .dropdown-menu {
        position: static;
        float: none;
        width: 100%;
        margin: 0.25rem 0 0;
        padding: 0.35rem;
        border-radius: 0.75rem;
        border: 1px solid rgba(var(--mf-text-rgb), 0.10);
        background: rgba(var(--mf-bg-rgb), 0.98);
        backdrop-filter: blur(10px);
    }

    .mf-navbar .dropdown-item {
        border-radius: 0.6rem;
        padding: 0.7rem 0.9rem;
        color: rgba(var(--mf-text-rgb), 0.86);
    }

    .mf-navbar .dropdown-item:hover,
    .mf-navbar .dropdown-item:focus {
        background: rgba(var(--mf-text-rgb), 0.05);
        color: rgba(var(--mf-text-rgb), 0.95);
    }

    .mf-navbar .dropdown-item.active,
    .mf-navbar .dropdown-item:active {
        background: rgba(var(--mf-primary-rgb), 0.16);
        color: rgba(var(--mf-text-rgb), 0.96);
    }
}

/* ================================================================
 *  MOBILE RESPONSIVE – Admin Panel
 *  Follows mobilpelda/ patterns.  All rules live behind @media;
 *  desktop (>= 1024 px) is pixel-identical.
 * ================================================================ */

/* 1. Navbar: semi-transparent when open on admin pages ........ */
@media (max-width: 991.98px) {
    /* Semi-transparent navbar dropdown background on admin pages */
    body.mf-admin-body .mf-navbar.mf-nav-open .navbar-collapse,
    body.mf-admin-body .mf-navbar.mf-nav-closing .navbar-collapse {
        background: rgba(var(--mf-bg-rgb), 0.88) !important;
        backdrop-filter: blur(18px) !important;
        -webkit-backdrop-filter: blur(18px) !important;
    }

    /* Admin sidebar nav links embedded in mobile navbar */
    .mf-navbar-admin-nav {
        padding: 0 0.5rem 0.5rem;
    }
    .mf-navbar-admin-nav .mf-admin-sidebar__section {
        padding: 0.5rem 0.5rem;
    }
    .mf-navbar-admin-nav .mf-admin-sidebar__label {
        font-size: 0.68rem;
        margin-bottom: 0.5rem;
        color: rgba(var(--mf-text-rgb), 0.45);
    }
    .mf-navbar-admin-nav .mf-admin-nav {
        gap: 0.15rem;
    }
    .mf-navbar-admin-nav .mf-admin-nav__link {
        padding: 0.55rem 0.75rem;
        font-size: 0.92rem;
        border-radius: 0.5rem;
    }

    /* Mobile language selector next to hamburger */
    .mf-mobile-lang .btn {
        color: rgba(var(--mf-text-rgb), 0.78) !important;
        font-size: 0.88rem;
        text-decoration: none;
        font-weight: 500;
        letter-spacing: 0.02em;
    }
    .mf-mobile-lang .btn:hover,
    .mf-mobile-lang .btn:focus {
        color: var(--mf-text) !important;
    }
    .mf-mobile-lang .dropdown-menu {
        min-width: 8rem;
        background: rgba(var(--mf-bg-rgb), 0.96);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(var(--mf-text-rgb), 0.10);
        border-radius: 0.6rem;
    }
    .mf-mobile-lang .dropdown-item {
        font-size: 0.88rem;
        padding: 0.5rem 0.85rem;
        color: rgba(var(--mf-text-rgb), 0.85);
        border-radius: 0.4rem;
    }
    .mf-mobile-lang .dropdown-item:hover {
        background: rgba(var(--mf-text-rgb), 0.05);
    }
    .mf-mobile-lang .dropdown-item.active {
        background: rgba(var(--mf-primary-rgb), 0.15);
        color: var(--mf-text);
    }
}

/* 2. KPI stat cards: 2-per-row on phones ....................... */
@media (max-width: 767.98px) {
    .mf-admin-kpi-grid {
        --bs-gutter-x: 0.75rem;
        --bs-gutter-y: 0.75rem;
        margin-top: 0.75rem !important;
    }
    .mf-admin-kpi-grid .mf-admin-card {
        padding: 0.75rem !important;
    }
    .mf-admin-kpi-grid .mf-admin-card .fw-semibold {
        font-size: 1.1rem !important;
        line-height: 1.2 !important;
    }
}
/* Very small screens (< 360px): single column */
@media (max-width: 359.98px) {
    .mf-admin-kpi-grid > [class*="col-"] {
        flex: 0 0 100% !important;
        max-width: 100% !important;
        width: 100% !important;
    }
}

/* 3. Table → stacked event cards on mobile .................... */
@media (max-width: 767.98px) {
    /*
     * Override the earlier "horizontal scroll" rules (lines ~472-501)
     * that set min-width:860px, overflow-x:auto, white-space:nowrap.
     * We replace them with a stacked-card layout.
     */
    .mf-admin-table-card {
        overflow: visible !important;
        border-radius: 0 !important;
        border: none !important;
        background: transparent !important;
        backdrop-filter: none !important;
    }
    .mf-admin-table-card .mf-admin-table-scroll {
        overflow: visible !important;
        max-height: none !important;
    }
    .mf-admin-table-card .mf-admin-table-scroll,
    .mf-admin-table-card .dataTables_scrollBody {
        overflow-x: visible !important;
        overflow-y: visible !important;
    }
    /* DataTables wrapper must not create its own overflow context */
    .mf-admin-table-card .dataTables_wrapper {
        overflow: visible !important;
        width: 100% !important;
    }
    .mf-admin-table-card .table,
    .mf-admin-table-card .dataTables_scrollHead table,
    .mf-admin-table-card .dataTables_scrollBody table {
        min-width: 0 !important;
        width: 100% !important;
        max-width: 100% !important;
        table-layout: auto !important;
    }
    .mf-admin-table-card td,
    .mf-admin-table-card th {
        white-space: normal !important;
    }
    .mf-admin-table-card::after {
        display: none !important;
    }

    /* Hide thead — labels are injected into cells via data-label */
    .mf-admin-table-card .table thead {
        display: none !important;
    }
    /* Also hide DT scroll-header clone */
    .mf-admin-table-card .dataTables_scrollHead {
        display: none !important;
    }

    .mf-admin-table-card .table {
        display: block !important;
        border-collapse: separate;
        border-spacing: 0;
    }
    .mf-admin-table-card .table tbody {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
    }
    .mf-admin-table-card .table tbody tr {
        display: flex;
        flex-direction: column;
        padding: 0.85rem 1rem;
        border: 1px solid rgba(var(--mf-text-rgb), 0.10);
        border-radius: 0.75rem;
        background: rgba(var(--mf-text-rgb), 0.03);
        transition: background 0.15s;
    }
    .mf-admin-table-card .table tbody tr:hover {
        background: rgba(var(--mf-text-rgb), 0.06);
    }
    .mf-admin-table-card .table tbody td {
        display: flex !important;
        justify-content: space-between;
        align-items: center;
        padding: 0.35rem 0 !important;
        border: none !important;
        border-bottom: 1px solid rgba(var(--mf-text-rgb), 0.06) !important;
        background: transparent !important;
        text-align: right;
        white-space: normal !important;
        word-break: break-word;
        width: 100% !important;
        max-width: 100% !important;
        min-width: 0 !important;
    }
    .mf-admin-table-card .table tbody td:last-child {
        border-bottom: none !important;
    }
    .mf-admin-table-card .table tbody td::before {
        content: attr(data-label);
        font-weight: 600;
        font-size: 0.72rem;
        color: rgba(var(--mf-text-rgb), 0.45);
        text-transform: uppercase;
        letter-spacing: 0.06em;
        text-align: left;
        flex-shrink: 0;
        margin-right: 1rem;
    }

    /* Checkbox column — no label, top of card */
    .mf-admin-table-card .table tbody td:first-child {
        justify-content: flex-start;
        padding-bottom: 0.5rem !important;
        margin-bottom: 0.15rem;
    }
    .mf-admin-table-card .table tbody td:first-child::before {
        content: none;
    }
    /* Enlarge checkbox for touch */
    .mf-admin-table-card .table tbody .mf-row-select,
    .mf-admin-table-card .table tbody .mf-user-select {
        width: 1.25rem;
        height: 1.25rem;
    }

    /* Actions cell: stack buttons vertically, full width */
    .mf-admin-table-card .table tbody td:last-child .d-flex {
        flex-direction: column;
        width: 100%;
        gap: 0.5rem !important;
    }
    .mf-admin-table-card .table tbody td:last-child .d-flex .btn {
        width: 100%;
        justify-content: center;
    }
    /* postLink hidden forms must stay hidden inside flex cell */
    .mf-admin-table-card .table tbody td form[style*="display:none"],
    .mf-admin-table-card .table tbody td form[style*="display: none"] {
        position: absolute !important;
        width: 0 !important;
        height: 0 !important;
        overflow: hidden !important;
    }

    /* colspan "no data" row */
    .mf-admin-table-card .table tbody td[colspan] {
        display: block !important;
        text-align: center;
        border: none !important;
        padding: 1.25rem 0 !important;
    }
    .mf-admin-table-card .table tbody td[colspan]::before {
        content: none;
    }

    /*
     * Fix truncated / overflowing text in card cells.
     * DeviceLogs: User Agent div.text-truncate max-width:420px
     * AiRequests: Ref div.text-truncate max-width:220px
     * Dashboard: Details span overflow:hidden
     */
    .mf-admin-table-card .table tbody td .text-truncate {
        overflow: visible !important;
        white-space: normal !important;
        text-overflow: clip !important;
        max-width: none !important;
        word-break: break-word;
    }
    .mf-admin-table-card .table tbody td .text-nowrap {
        white-space: normal !important;
    }
    .mf-admin-table-card .table tbody td div[style] {
        max-width: none !important;
        overflow: visible !important;
        white-space: normal !important;
        word-break: break-word;
    }
    .mf-admin-table-card .table tbody td span[style] {
        max-width: none !important;
        overflow: visible !important;
        white-space: normal !important;
        display: inline !important;
        word-break: break-word;
    }
}

/* 4. Bulk controls: stack on mobile ........................... */
@media (max-width: 767.98px) {
    .mf-admin-bulkbar {
        flex-direction: column !important;
        align-items: stretch !important;
        gap: 0.75rem !important;
        padding: 0.85rem 0;
    }
    .mf-admin-bulkbar .mf-muted {
        font-size: 0.82rem !important;
    }
    .mf-admin-bulkbar .d-flex.align-items-center.gap-2 {
        flex-direction: column;
        width: 100%;
    }
    .mf-admin-bulkbar .d-flex.align-items-center.gap-2 .btn {
        width: 100%;
    }
}

/* 5. Overall admin container: prevent any overflow ............ */
@media (max-width: 767.98px) {
    /* Ensure admin main never overflows viewport width */
    .mf-admin-main > .container-fluid {
        max-width: 100vw;
        overflow-x: hidden;
    }
    /* Toolbar: search input should shrink */
    .mf-admin-toolbar__search {
        min-width: 0 !important;
    }
}

/* ═══════════════════════════════════════════════════════════════
   Admin page header — icon badge + title + subtitle + CTA
   ═══════════════════════════════════════════════════════════════ */
.mf-page-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 1rem;
    flex-wrap: wrap;
    margin-bottom: 1.25rem;
}

.mf-page-header__left {
    display: flex;
    align-items: flex-start;
    gap: 0.85rem;
    min-width: 0;
}

.mf-page-header__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.75rem;
    height: 2.75rem;
    border-radius: 0.75rem;
    background: rgba(var(--mf-primary-rgb), 0.14);
    color: var(--mf-primary);
    font-size: 1.3rem;
    flex-shrink: 0;
    margin-top: 0.1rem;
}

.mf-page-header__title {
    font-size: 1.35rem;
    font-weight: 600;
    margin: 0 0 0.15rem;
    line-height: 1.3;
}

.mf-page-header__title .mf-page-header__count {
    font-size: 0.82rem;
    font-weight: 500;
    vertical-align: middle;
    margin-left: 0.4rem;
    padding: 0.15em 0.5em;
    border-radius: 999px;
    background: rgba(var(--mf-text-rgb), 0.08);
    color: rgba(var(--mf-text-rgb), 0.7);
}

.mf-page-header__sub {
    color: rgba(var(--mf-text-rgb), 0.55);
    font-size: 0.875rem;
    margin: 0;
}

.mf-page-header__right {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-shrink: 0;
}

/* KPI stat card enhancements */
.mf-kpi-card {
    display: flex;
    align-items: center;
    gap: 0.85rem;
}

.mf-kpi-card__icon {
    font-size: 1.5rem;
    color: var(--mf-primary);
    flex-shrink: 0;
    width: 1.75rem;
    text-align: center;
    opacity: 0.8;
}

.mf-kpi-card__body {
    flex: 1;
    min-width: 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
}

.mf-kpi-card__label {
    font-size: 0.8rem;
    color: rgba(var(--mf-text-rgb), 0.55);
    text-transform: uppercase;
    letter-spacing: 0.04em;
    font-weight: 500;
    flex-shrink: 1;
    min-width: 0;
}

.mf-kpi-card__value {
    font-size: 1.4rem;
    font-weight: 700;
    line-height: 1.2;
    font-variant-numeric: tabular-nums;
    text-align: right;
    flex-shrink: 0;
}

.mf-kpi-card__delta {
    font-size: 0.75rem;
    color: rgba(var(--mf-text-rgb), 0.5);
    text-align: right;
}

.mf-kpi-card__delta--positive {
    color: #22c55e;
}

.mf-kpi-card__delta--negative {
    color: #ef4444;
}

/* Responsive KPI */
@media (max-width: 575.98px) {
    .mf-page-header {
        flex-direction: column;
        gap: 0.75rem;
    }
    .mf-page-header__right {
        width: 100%;
    }
    .mf-page-header__right .btn {
        flex: 1;
    }
    .mf-page-header__icon {
        width: 2.25rem;
        height: 2.25rem;
        font-size: 1.1rem;
    }
    .mf-page-header__title {
        font-size: 1.15rem;
    }
    .mf-kpi-card__value {
        font-size: 1.1rem;
    }
    .mf-kpi-card__icon {
        font-size: 1.2rem;
        width: 1.4rem;
    }
}
